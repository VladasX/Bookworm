{% extends "bookworm/base.html" %}
{% load staticfiles %}
{% block title_block %}
	Profile
{% endblock %}

{% block body_block %}

	<style>
	table {
		font-family: arial, sans-serif;
		border-collapse: collapse;
		width: 100%;
	}

	td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
	}

	tr:nth-child(even) {
    background-color: #dddddd;
	}
	</style>
	<h2><span style="margin-left:15px">Welcome to {{ user.username }}'s reading list!</span></h2>
	<div class="container">
		{% if reading_data %}
			<table>
			<tr>
				<th style="text-decoration: underline">Book title</th>
				<th style="text-decoration: underline">Reading status</th>
				<th style="text-decoration: underline">Change status</th>
			</tr>
			{% for data in reading_data %}
				<tr>
				<th>{{ data.book.title }} <span style="font-weight:normal;font-size:12px;">by {{ data.book.authors }}</span></th> 
				{% if data.status == 0 %}
					<th style="width:250px"><div class="col-7 stat badge-pill badge-primary">{{ data.status }}</div></th>
				{% elif data.status == 1 %}
					<th style="width:250px"><div class="col-7 stat badge-pill badge-success">{{ data.status }}</div></th>
				{% elif data.status == 2 %}
					<th style="width:250px"><div class="col-7 stat badge-pill badge-warning">{{ data.status }}</div></th>
				{% elif data.status == 3 %}
					<th style="width:250px"><div class="col-7 stat badge-pill badge-danger">{{ data.status }}</div></th>
				{% endif %}
				<form role="form" method="post">
					{% csrf_token %}
					<td style="width:220px">
						<select class="form-control-static.input-lg" id="status" name="status">
							<option value="0">I'm reading this!</option>
							<option value="1">I've read this!</option>
							<option value="2">I want to read it!</option>
							<option value="3">I dropped this...</option>
						</select>
						<input type="hidden" value={{ data.book.bookid }} name="bookid" />
						<button class="btn btn-secondary" type="submit">Submit</button>
					</td>
				</form>
				</tr>
			{% endfor %}
			</table>
			
		{% endif %}
	</div>
	
	<script>
		function status(n){
			switch(n){
				case 0:
				return "I'm reading this!";
				case 1:
				return "I've read this!";
				case 2:
				return "I want to read it!";
				case 3:
				return "I dropped this...";
				default:
				return 0;
			}
		
		}
		
		var es = document.getElementsByClassName("stat");
		for(i = 0; i < es.length; i++){
			es[i].innerHTML = status(parseInt(es[i].innerHTML));
		}
	
	</script>
{% endblock %}